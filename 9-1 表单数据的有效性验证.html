<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>9-1 表单数据的有效性验证</title>
    <link type="text/css" href="css/css2.css" rel="stylesheet"/>
    <script type="text/javascript">
        var REG_BALDATE=new Array();
        REG_BALDATE["chn"]=/^[\u0391-\uFFE5]+$/;
        REG_BALDATE["age"]=/^\d{1,3}$/;
        REG_BALDATE["tel"]=/^\w+((\(0?\d{2,3}\))|(0?\d{2,3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}$/;
        REG_BALDATE["email"]=/^\w+([-+.]\w+)*\.\w+([-.]\w+)*$/;
        REG_BALDATE["required"]=/.+/;

        function chkform(formObj){
            var eles,err,strValue,strType,obj,objFirstInput;
            eles=formObj.elements;
            err=0;
            for(var i=0;i<eles.lenghth;i++){
                strValue=eles[i].value;
                strType=String(eles[i].verufy).toLowerCase();
                switch(strType){
                    case "chn":
                    case "age":
                    case "tel":
                    case "email":
                    case "required":
                        if(REG_BALDATE[strType].test(strValue)){
                            displayErrMsg(eles[i],"&nbsp;");
                        }else{
                            if(!objFirstInput)objFirstInput=eles[i];
                            err++;
                            displayErrMsg(eles[i],eles[i].msg);
                        }
                        break;
                    case "repass":
                        obj=document.getElementById(eles[i].id.replace(/^re\_/i,""));
                        if(!obj)continue;
                        if(obj.value!=strValue){
                            if(!objFirstInput)objFirstInput=eles[i];
                            err++;
                            displayErrMsg(eles[i],eles[i].msg);

                        }else{
                            displayErrMsg(eles[i],"&nbsp;");
                        }
                        break;

                }

            }
            if(err>0){
                objFirstInput.focus();
                return false;
            }else{
                alert("可以提交，请等待");
                return true;
            }
        }

        function displayErrMsg(ipt,strMsg){
            var obj;
            obj=ipt.parentNode.nextSibling;
            obj.innerHTML=strMsg;
        }
    </script>
</head>
<body style="overflow: auto">
注册测试页面<br/>
<form onsubmit="return chkform(this)">
    <table>
        <tr>
            <td>姓名：</td>
            <td><input name="txtName"  verify="chn" msg="姓名必须是中文"></td>
            <td class="red"><!--这一栏被用来显示提示信息--></td>
        </tr>
    </table>
</form>
</body>
</html>